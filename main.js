!function(){"use strict";var e=class{constructor(e,t){this._settings=e,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._form=t,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._button=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.classList.add(this._settings.errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1)}disableButton(){this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid||""===e.value.trim()))}_checkInvalidValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInvalidValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(),this._toggleButtonState()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this.disableButton()}};const t=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class n{constructor(e,t,s){this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this.name,link:this.link})})),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard()))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._element.remove(),this._element=null}getView(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this.link,this._element.querySelector(".card__image").alt=this.name,this._element.querySelector(".card__title").textContent=this.name,this._cardLikeButton=this._element.querySelector(".card__like-button"),this._setEventListeners(),this._element}}class i{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}class o{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class r extends o{constructor(e){super(e),this._image=this._popup.querySelector(".modal__image"),this._caption=this._popup.querySelector(".modal__caption")}open({name:e,link:t}){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}class a extends o{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".modal__form")}_getInputValues(){const e=this._form.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._form.reset()}))}}class l{constructor({nameSelector:e,jobSelector:t}){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo({name:e,job:t}){this._nameElement.textContent=e,this._jobElement.textContent=t}}document.addEventListener("DOMContentLoaded",(()=>{const o=document.querySelector(".profile__edit-button"),c=document.querySelector("#profile-add-button"),d=document.querySelector(".modal__input-title"),u=document.querySelector(".modal__input-description"),_=document.querySelector("#profile-form"),m=document.querySelector("#add-form"),h=new l({nameSelector:".profile__title",jobSelector:".profile__description"}),p=new i({items:t,renderer:e=>{const t=b(e);p.addItem(t)}},".cards__list-content"),v=new r("#modal-image-preview");v.setEventListeners();const E=new a("#profile-edit-modal",(e=>{h.setUserInfo(e),E.close()}));E.setEventListeners();const g=new a("#profile-add-modal",(e=>{const t=b({name:e["add-title"],link:e["link-type"]});p.addItem(t),g.close(),m.reset(),L.disableButton()}));g.setEventListeners();const S=new e(s,_),L=new e(s,m);function b(e){return new n(e,"#card-template",f).getView()}function f(e){v.open(e)}S.enableValidation(),L.enableValidation(),o.addEventListener("click",(()=>{const e=h.getUserInfo();d.value=e.name,u.value=e.job,E.open(),S.resetValidation()})),c.addEventListener("click",(()=>{L.disableButton(),g.open()})),p.renderItems()}))}();